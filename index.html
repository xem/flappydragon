<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>...</title>
		<meta charset="utf-8">
    <style>
      html, body { margin: 0; padding: 0; border: 0; }
      #c { display: block; } /* kill scrollbars from hell */
    </style>
	</head>
	<body>
		<canvas height="635" style="width: 1366px; height: 635px;" width="1366" id="c"></canvas>
		<script>
			var a = document.getElementsByTagName('canvas')[0];
			var b = document.body;
      var d = function(e){ return function(){ e.parentNode.removeChild(e); }; }(a);
      // unprefix some popular vendor prefixed things (but stick to their original name)
      var AudioContext =
        window.AudioContext ||
        window.webkitAudioContext;
      var requestAnimationFrame =
        window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(f){ setInterval(f, 1000/30); };
      // stretch canvas to screen size (once, wont onresize!)
      a.style.width = (a.width = innerWidth) + 'px';
      a.style.height = (a.height = innerHeight) + 'px';

      var c = a.getContext('2d');
		</script>
		<script>

/** MY CODE **/

// Initializations:
// Canvas size
W = a.width;
H = a.height;

// Canvas scale (height compared to 1000px)
s = H / 1000;

// Game state (begin / ended / Score / Framerate)
B = E = C = 0;
r = 60;

// Walls randomness (0-10)
R = [];
for(i = 0; i < 1000; i++){
  R[i] = R[i + 1000] = ~~(Math.random() * 6) + 1;
}

// Dragon shape (temp)
d = [[20, 0], [0, -6], [-4, -7], [-6, -1], [-3, -4], [-1, -5], [-4, 4], [-10, -10], [0, 8], [-11, -1], [3, 8], [-10, 1], [6, 5], [0, 5], [-4, 1], [-8, -8], [-11, -29], [-5, -5], [-10, 12], [9, 0], [-4, 7], [6, 2], [-2, 6], [-24, -25], [-8, 17], [7, -1], [-1, 7], [9, 2], [-2, 8], [7, -1], [0, 6], [5, 0], [-2, 5], [-14, -2], [-4, -9], [-5, 3], [-7, -3], [0, 8], [-7, 2], [9, 4], [11, 8], [-4, 4], [-4, -3], [-3, 3], [3, 2], [-2, 2], [3, 1], [0, 2], [3, 1], [2, -4], [7, -4], [7, 2], [-1, 4], [-5, -2], [-6, 1], [3, 3], [2, 0], [0, 2], [-2, 3], [5, -1], [1, 3], [2, -3], [3, 1], [0, -5], [4, -4], [17, 0], [13, -5], [12, -6], [10, 3], [11, 0], [14, -7], [-20, -6]];
e = [[16, 0], [0, -8], [-4, -6], [-8, -2], [-1, -7], [-4, 3], [-11, -8], [0, 8], [-9, -1], [1, 7], [-9, 2], [5, 6], [-4, 6], [-9, -2], [-38, 2], [-4, -10], [-4, -2], [-1, 7], [-10, -4], [4, 7], [-10, 3], [11, 4], [11, 7], [-4, 4], [-7, 0], [2, 1], [-3, 4], [4, 0], [2, 4], [2, -4], [10, -7], [5, 4], [-1, 3], [-7, 0], [3, 4], [-3, 4], [7, -1], [1, 4], [3, -6], [1, -6], [23, 1], [-6, 5], [8, 7], [-12, 2], [7, 9], [-9, 6], [16, 2], [7, -13], [0, -17], [10, 9], [-7, 4], [7, 7], [-6, 8], [13, 4], [5, -26], [-9, -10], [-9, -7], [7, -3], [11, 3], [11, 1], [11, -8], [-15, -5]];

// Dragon head position (on a 1000px high canvas)
x = 200;
y = 950;

// Dragon vertical speed, jump size (random) and gravity (random)
V = 0;
J = ~~(Math.random() * 10) + 30;
G = ~~(Math.random() * 3) + 2;

// Scene scroll (px)
S = 20;

// Click/tap to:
// - Start
// - Increase the dragon's vertical speed (
// - Reset
ontouchstart = onmousedown = function(){
  if(E){
    location = location;
  }
  else{
    B = 1;
    V = J;
  }
}

// Game loop
k = 0;
F = function(){

  // Draw background
  c.fillStyle = "#E50";
  c.fillRect(0, 0, W, H);

  // Scale the canvas as if it was 1000px high
  c.save();
  c.scale(s, s);
  
    // Up wall
    c.fillStyle = "#920";
    c.beginPath();
    c.moveTo(-S, 0);
    for(i = 0; i < 2000; i++){

      // random height every 40px
      if(i % 20){
        c.lineTo(i * 40 - S, 20 + 4 * R[i]);
      }
      
      // random obstacle every 20 steps.
      else{
        c.lineTo(i * 40 - S, 100 * (R[i]));
        c.lineTo(i * 40 + 4 - S, 100 * (R[i]));
      }
    }
    c.lineTo(i * 40 - S, 0);
    c.lineTo(-S, 0);
    c.closePath();
    c.fill();
    
    // Down wall
    c.beginPath();
    c.moveTo(-S, 2000);
    for(i = 0; i < 2000; i++){
      if(i % 20){
        c.lineTo(i * 40 - S, 980 - 4 * R[i]);
      }
      else{
        c.lineTo(i * 40 - S, 100 * (R[i] + 3));
        c.lineTo(i * 40 + 4 - S, 100 * (R[i] + 3));
      }
    }
    c.lineTo(i * 40 - S, 1000);
    c.lineTo(-S, 1000);
    c.closePath();
    c.fill();
  
    // Draw dragon
    c.fillStyle = "#000";
    c.beginPath();
    z = V > 10 ? d : e;
    c.moveTo(v = x, w = (y = y - V));
    for(i = 0; i < z.length; i++){
      c.lineTo((v += z[i][0]),(w += z[i][1]));
    }
    c.closePath();
    c.fill();
    
    // If the game has started, fall
    if(B){
      if(V > -40){
        V -= G;
      }
    }
    
    // If the game is started and not over, scroll
    if(B && !E){
      S += 20;
      if(S > 40000){
        S-= 40000;
      }
    }
    
    // Count loops
    if(B){
      k++;
    }
    
    // Increase score and speed every 40 loops
    if(B && !E && !(k % 40)){
      C++;
      if(r > 15){
        r--;
      }
    }
    
    // Game over
    if(
      // Too high
      y < 50
      
      ||
      
      // Too low
      y > 950
      
      ||
      
      // Didn't pass between obstacles
      (!((S + 120) % 800) && B && k > 10 && (y < R[Math.floor(S/800) * 20 + 20] * 100 + 50 || y > R[Math.floor(S/800) * 20 + 20] * 100 + 250))
    ){
      E = 1;
    }
    
    // Text
    c.fillStyle = "#fff";
    c.font = "bold 100px 'Century Gothic', Arial";
    
    if(E || !B){
    
      // Game over
      if(E){
        c.fillText("GAME OVER", W / 2 / s - 300, 400);
        c.fillText("SCORE: " + C, W / 2 / s - 200, 500);
        c.fillText("Restart", W / 2 / s - 150, 600);
      }
      
      // Start
      if(!B){
        c.fillText("FLAPPY DRAGON", W / 2 / s - 400, 450);
        c.fillText("Start", W / 2 / s - 100, 550);
      }
    }
    
    // Score
    if(!E && B){
      c.fillText(C, W / s - 200, 150);
    }
  
  c.restore();
  
  setTimeout(F, r);
}
F();

/** END **/
		</script>
	

</body></html>